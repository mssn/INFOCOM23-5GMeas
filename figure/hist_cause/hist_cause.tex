\documentclass{standalone}
% translate with >> pdflatex -shell-escape <file>

% This file is an extract of the PGFPLOTS manual, copyright by Christian Feuersaenger.
% 
% Feel free to use it as long as you cite the pgfplots manual properly.
%
% See
%   http://pgfplots.sourceforge.net/pgfplots.pdf
% for the complete manual.
%
% Any required input files (for <plot table> or <plot file> or the table package) can be downloaded
% at
% http://www.ctan.org/tex-archive/graphics/pgf/contrib/pgfplots/doc/latex/
% and
% http://www.ctan.org/tex-archive/graphics/pgf/contrib/pgfplots/doc/latex/plotdata/

\usepackage{pgfplots}
\usetikzlibrary{patterns}
\pgfplotsset{compat=newest,
	every axis/.append style={line width=1pt}}


\pagestyle{empty}


\definecolor{myred}{RGB}{202,0,32}
\definecolor{myorange}{RGB}{244,165,130}
\definecolor{myviolet}{RGB}{194,165,207}
\definecolor{mycyan}{RGB}{146,197,222}
\definecolor{myblue}{RGB}{5,113,176}
\definecolor{mygreen}{RGB}{127,191,123}
\definecolor{mytile}{RGB}{27,120,55}
\definecolor{myblack}{RGB}{60,60,60}
\definecolor{mygray}{RGB}{220,220,220}
% \definecolor{palette3}{RGB}{247,247,247}


\begin{document}
	\begin{tikzpicture}
		\tikzset{
			hatch distance/.store in=\hatchdistance,
			hatch distance=10pt,
			hatch thickness/.store in=\hatchthickness,
			hatch thickness=2pt
		}
		
		\makeatletter
		\pgfdeclarepatternformonly[\hatchdistance,\hatchthickness]{flexible hatch}
		{\pgfqpoint{0pt}{0pt}}
		{\pgfqpoint{\hatchdistance}{\hatchdistance}}
		{\pgfpoint{\hatchdistance-1pt}{\hatchdistance-1pt}}%
		{
			\pgfsetcolor{\tikz@pattern@color}
			\pgfsetlinewidth{\hatchthickness}
			\pgfpathmoveto{\pgfqpoint{0pt}{0pt}}
			\pgfpathlineto{\pgfqpoint{\hatchdistance}{\hatchdistance}}
			\pgfusepath{stroke}
		}
		\makeatother
				
		\begin{axis}[
%			set layers=standard,
			%legend columns=1,
			ybar stacked,
			axis x line*=bottom,
			y tick label style={
			/pgf/number format/1000 sep=},
			ymin=0,
			%ymax=1.13,
			ymax=100,
			xmin = 0,
			xmax = 1.5,%4.15
			width = 11.5cm, %10cm,%14cm,
%			height = 4.25cm,
			height = 4 cm,
			axis line style={
%				draw=none,
			line width=0.02mm,
%			semithick,
			},
			axis line style={draw=none},
%			xlabel={{\bf Regions}: 1-5 ({\bf AT\&T}), 6-11 ({\bf Verizon}), 12,13({\bf T-Mobile})},
			xlabel style={
				%        font=\normalsize,
				font=\normalsize,
				% at={(current axis.north west)},
				% rotate=-90,
				% xshift=-1ex,
				xshift = 0pt,
				yshift = 5pt,
			},
			ylabel=Percentage(\%),
			ylabel style={
				%        font=\normalsize,
				font=\normalsize,
				% at={(current axis.north west)},
				% rotate=-90,
				% xshift=-1ex,
				xshift = -6pt,
				yshift = -12pt,
			},
			xticklabel style={
%				font=\normalsize,
				font=\normalsize,
				xshift = 0pt,
				yshift = 3pt,
				%rotate=-60,
			},
		%ytick={0,0.25,0.5,0.75,1},
		ytick={0,25,50,75,100},
		yticklabels={0,25,50,75,100},
		yticklabel style={
			font=\normalsize,
			xshift = 3pt,
			yshift = 0pt,
		},
			draw = none,
			legend style={
				at={(1.17,0.95)},
				%pos=outer north west,
				%legend columns=2,
				%anchor=north,
%				fill opacity=0.1,
%				anchor=north west,
				font    = \normalsize,
				%fill    = none,
				draw = none,
				legend cell align   = right,
				legend columns=1,
				%samplen = 1pt,
				%column sep=1ex,
				%row sep=-5pt,
			},
			%enlargelimits=0.05,
			bar width=15pt,
			ymin = 0,
			xmin = -0.05,
			% width=.75\textwidth,
			%ytick={0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1,1.1,1.2},
			xtick={0,0.1,0.2,0.3,0.4,0.6,0.7,0.8,0.9,1,1.1,1.3,1.4
			%1.4,1.5,1.6,1.7,1.8,1.9,2.0,2.1,2.2,2.3,2.4,2.5,2.6
			%2.8,2.9,3.0,3.1,3.2,3.3,3.4,3.5,3.6,3.7,3.8,3.9,4.0
			},
			%yticklabels={$1C_{s-miss}$, $R1E_{s-miss}$,$R1D(w/o5G_m)_{s-miss}$, $R1C_{s-miss}$,$R1B(<20\%)_{s-miss}$,$R1B(w/5G_m)_{s-miss}$, $1b_{m-miss}$,$1a_{m-miss}$, $R1C_{m-miss}$,$R1B(<20\%)_{m-miss}$,$R1B_{m-miss}$},			
			%xticklabels={1,2,3,4,5,6,7,8,9,10,11,12,13},
			%xticklabels={R1,,R3,,R5,,R7,,R9,,R11,,R13,R1,,R3,,R5,,R7,,R9,,R11},
			%xticklabels={R1,2,3,,5,6,7,8,9,10,11,,,R1,2,3,4,5,6,7,8,9,10,11,12,13},
			%xticklabels={R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13},
			%xticklabels={R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13},
			xticklabels={R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12, R13},
			%xticklabels={A-R1,A-R2,A-R3,A-R4,A-R5,V-R6,V-R7,V-R8,V-R9,V-R10,V-R11,T-R12,T-R13},
			%yticklabels={,cell set,cell set sample,duration,handover}
			clip mode=individual,
			]
			%\legend{Cfg., Meas.+Report, Command}
			\legend{E1,E2,E3,E4}
			
			\addplot+[
			pattern=north west lines,
			pattern color = red,
			%fill = white,
			draw = red,
			line color = red,
			area legend
			]table[x=x,y=e1,col sep=comma,]{instance_case_breakdown_missed_faster_5g.csv}; %instance_stat_rat_0405-1226_0.0005_wrong_instance_v2.csv};
				
			\addplot+[
			%pattern=north east lines,
			pattern color = blue,
			fill = white,
			draw = blue,
			line color = blue,
			area legend
			]table[x=x,y=e2,col sep=comma,]{instance_case_breakdown_missed_faster_5g.csv}; %instance_stat_rat_0405-1226_0.0005_wrong_instance_v2.csv};
%			
			\addplot+[
			pattern color = blue,
			fill = blue,
			draw = blue,
			line color = blue,
			area legend
			]table[x=x,y=e3,col sep=comma,]{instance_case_breakdown_missed_faster_5g.csv}; %instance_stat_rat_0405-1226_0.0005_wrong_instance_v2.csv};
%			
			\addplot+[
			pattern=horizontal lines,
			pattern color = black,
			%fill = white,
			draw = black,
			line color = black,
			area legend
			]table[x=x,y=e4,col sep=comma,]{instance_case_breakdown_missed_faster_5g.csv}; %instance_stat_rat_0405-1226_0.0005_wrong_instance_v2.csv};
			
			\node[text=black] at (axis cs:0.47,50) {\bf \texttt{A}};
			\node[text=black] at (axis cs:0.52,50) {\bf \texttt{V}};
			\node[text=black] at (axis cs:1.22,50) {\bf \texttt{T}};
			\draw[line width=0.2pt, gray,dashed] (axis cs:0.5,0) to (axis cs:0.5,100);
			\draw[line width=0.2pt, gray,dashed] (axis cs:1.2,0) to (axis cs:1.2,100);
			
			%\node[text=black] at (axis cs:0.5,107) {\bf no-5GM};
			%\node[text=black] at (axis cs:2.0,107) {\bf no-5GS};
			%\node[text=black] at (axis cs:3.4,110) {\bf 5G$_s$-miss (w/ 5G$_m$)};
			%\draw[line width=0.7mm, gray,dashed] (axis cs:1.3,0) to (axis cs:1.3,1);
		\end{axis}
	\end{tikzpicture}
	
\end{document}
